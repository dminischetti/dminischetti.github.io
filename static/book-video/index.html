<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Buon Compleanno Chiara ✨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
:root {
  --bg-dark: #14121a;
  --text-light: #fffafc;
  --pink-main: #FF4EA6;
  --red-main: #FF3860;
  --rainbow-1: #FF4EA6;
  --rainbow-2: #FF3860;
  --rainbow-3: #FFB400;
  --rainbow-4: #3AEDC4;
  --rainbow-5: #1EA7FF;
  --rainbow-6: #9C6BFF;
  --shadow-color: rgba(20,18,26,0.7);
  --gradient-primary: linear-gradient(90deg, var(--rainbow-1), var(--rainbow-2), var(--rainbow-3), var(--rainbow-4), var(--rainbow-5), var(--rainbow-6), var(--rainbow-1));
  --gradient-radial: radial-gradient(circle at center, var(--rainbow-1) 0%, transparent 70%);
  --purple-romantic: #BC6FF1;
  --pink-bright: #FF7EB9;
  --cyan-bright: #00DFFC;
  --yellow-bright: #FFD700;
}

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg-dark);
  color: var(--text-light);
  overflow-x: hidden;
  min-height: 100vh;
  position: relative;
}

.bg-gradient {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background: radial-gradient(circle at top center, var(--purple-romantic) 0%, transparent 70%);
  z-index: -1;
}
.bg-gradient::before {
  content: '';
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  background: var(--gradient-radial);
  animation: pulse 4s ease-in-out infinite;
  pointer-events: none;
}

.particles-container {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: -2;
}
.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--yellow-bright);
  border-radius: 50%;
  opacity: 0;
  animation: sparkle 3s ease-in-out infinite;
  will-change: transform, opacity;
}

.page-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem 1rem;
  position: relative;
}

.header-section {
  text-align: center;
  margin-bottom: 3rem;
  position: relative;
  z-index: 10;
}
.main-title {
  font-family: 'Dancing Script', cursive;
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 700;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 2px 10px var(--pink-main);
  animation: titleShine 3s ease-in-out infinite;
  will-change: filter;
}
.subtitle {
  font-family: 'Playfair Display', serif;
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  font-style: italic;
  color: var(--pink-bright);
  margin-bottom: 0.5rem;
}
.date-stamp {
  font-size: 1rem;
  color: var(--cyan-bright);
  font-weight: 500;
}

.main-card {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(15px);
  border-radius: 32px;
  padding: 3rem;
  max-width: 900px;
  width: 100%;
  box-shadow: 0 10px 30px var(--shadow-color);
  position: relative;
  overflow: hidden;
  animation: cardFloat 6s ease-in-out infinite;
  will-change: transform;
}
.main-card::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(255,215,0,0.1), transparent);
  animation: rotate 10s linear infinite;
  pointer-events: none;
}

.video-section {
  margin-bottom: 3rem;
  position: relative;
  z-index: 5;
}
.birthday-badge {
  display: block;
  background: var(--gradient-primary);
  color: var(--bg-dark);
  padding: 0.5rem 1.5rem;
  border-radius: 50px;
  font-size: 0.9rem;
  font-weight: bold;
  margin: 0 auto 1rem auto;
  width: fit-content;
  box-shadow: 0 4px 10px var(--shadow-color);
  animation: bounce 2s ease-in-out infinite;
  border: none;
  cursor: pointer;
  outline: none;
  transition: filter 0.2s;
}
.birthday-badge:active {
  filter: brightness(0.95);
}

.video-container {
  position: relative;
  border-radius: 24px;
  overflow: hidden;
  box-shadow: 0 10px 30px var(--shadow-color);
  transition: transform 0.5s cubic-bezier(0.175,0.885,0.32,1.275), box-shadow 0.5s cubic-bezier(0.175,0.885,0.32,1.275);
  background: var(--gradient-primary);
  padding: 4px;
  will-change: transform;
}
.video-container:hover {
  transform: scale(1.02) translateY(-8px);
  box-shadow: 0 12px 40px var(--shadow-color);
}
.video-wrapper {
  border-radius: 20px;
  overflow: hidden;
  background: #000;
}
video {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 20px;
}

.actions-section {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  align-items: center;
  margin-bottom: 3rem;
  position: relative;
  z-index: 5;
}
.primary-btn {
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem 3rem;
  background: var(--gradient-primary);
  color: var(--bg-dark);
  font-weight: bold;
  font-size: 1.2rem;
  text-decoration: none;
  border-radius: 60px;
  border: 2px solid var(--pink-main);
  box-shadow: 0 8px 20px var(--shadow-color), 0 0 0 4px var(--red-main);
  position: relative;
  overflow: hidden;
  transition: transform 0.4s cubic-bezier(0.175,0.885,0.32,1.275), box-shadow 0.4s cubic-bezier(0.175,0.885,0.32,1.275);
  will-change: transform;
}
.primary-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
  pointer-events: none;
}
.primary-btn:hover::before {
  left: 100%;
}
.primary-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 25px var(--shadow-color), 0 0 0 4px var(--red-main);
}
.btn-icon {
  font-size: 1.4rem;
  color: var(--yellow-bright);
  animation: pulse 2s ease-in-out infinite;
}

.message-section {
  background: rgba(255,255,255,0.05);
  padding: 3rem;
  border-radius: 28px;
  text-align: center;
  position: relative;
  border: 2px solid var(--purple-romantic);
  backdrop-filter: blur(10px);
  z-index: 5;
  box-shadow: 0 8px 20px var(--shadow-color);
}
.message-section::before {
  content: '';
  position: absolute;
  inset: -1px;
  background: var(--gradient-primary);
  border-radius: 28px;
  z-index: -1;
  opacity: 0.3;
  animation: borderGlow 3s ease-in-out infinite;
  pointer-events: none;
}
.hearts-decoration {
  font-size: 2rem;
  color: var(--pink-main);
  text-shadow: 0 0 10px var(--red-main), 0 0 20px var(--rainbow-3);
  margin-bottom: 1rem;
  animation: heartBeat 1.5s ease-in-out infinite;
}
.message-text {
  font-family: 'Playfair Display', serif;
  font-size: 1.3rem;
  color: var(--text-light);
  margin-bottom: 1.5rem;
  line-height: 1.6;
  font-style: italic;
}
.signature {
  font-size: 1.1rem;
  color: var(--pink-bright);
  font-weight: 600;
  margin-bottom: 1rem;
}
.love-note {
  font-size: 0.95rem;
  color: var(--cyan-bright);
  opacity: 0.8;
  font-style: italic;
}

.floating-elements {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 1;
}
.floating-heart,
.floating-star {
  position: absolute;
  opacity: 0;
  will-change: transform, opacity;
}
.floating-heart {
  font-size: 1.5rem;
  color: var(--pink-main);
  animation: floatUp 12s linear infinite;
}
.floating-star {
  font-size: 1.2rem;
  color: var(--yellow-bright);
  animation: floatStar 15s linear infinite;
}

.birthday-animation {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 100;
  opacity: 0;
  transition: opacity 0.5s;
}
.birthday-animation.active {
  opacity: 1;
}
.confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--gradient-primary);
  animation: confettiFall 3s ease-out forwards;
  will-change: transform, opacity;
}

/* Animations */
@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0) rotate(0deg);}
  50% { opacity: 1; transform: scale(1) rotate(180deg);}
}
@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: scale(1);}
  50% { opacity: 0.6; transform: scale(1.1);}
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0);}
  40% { transform: translateY(-8px);}
  60% { transform: translateY(-4px);}
}
@keyframes titleShine {
  0%, 100% { filter: brightness(1);}
  50% { filter: brightness(1.2) drop-shadow(0 0 10px rgba(255,215,0,0.5));}
}
@keyframes cardFloat {
  0%, 100% { transform: translateY(0px) rotate(0deg);}
  50% { transform: translateY(-10px) rotate(0.5deg);}
}
@keyframes rotate {
  from { transform: rotate(0deg);}
  to { transform: rotate(360deg);}
}
@keyframes borderGlow {
  0%, 100% { opacity: 0.3;}
  50% { opacity: 0.6;}
}
@keyframes heartBeat {
  0%, 100% { transform: scale(1);}
  50% { transform: scale(1.1);}
}
@keyframes floatUp {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0;}
  10%, 90% { opacity: 0.6;}
  100% { transform: translateY(-100px) rotate(360deg); opacity: 0;}
}
@keyframes floatStar {
  0% { transform: translateY(100vh) translateX(0px) rotate(0deg); opacity: 0;}
  10%, 90% { opacity: 0.8;}
  100% { transform: translateY(-100px) translateX(50px) rotate(720deg); opacity: 0;}
}
@keyframes confettiFall {
  0% { transform: translateY(-100vh) rotate(0deg); opacity: 1;}
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0;}
}
@keyframes ripple {
  to { transform: scale(2); opacity: 0;}
}

/* Responsive */
@media (max-width: 768px) {
  .page-container { padding: 1rem; }
  .main-card { padding: 2rem 1rem; }
  .primary-btn { padding: 1rem 2rem; font-size: 1.1rem;}
  .message-section { padding: 2rem 1rem; }
  .message-text { font-size: 1rem; }
}
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  
  <div class="particles-container" id="particles"></div>
  
  <div class="floating-elements">
    <div class="floating-heart" style="left: 10%; animation-delay: 0s;">💖</div>
    <div class="floating-heart" style="left: 20%; animation-delay: 2s;">💝</div>
    <div class="floating-heart" style="left: 30%; animation-delay: 4s;">💕</div>
    <div class="floating-heart" style="left: 50%; animation-delay: 6s;">💗</div>
    <div class="floating-heart" style="left: 70%; animation-delay: 8s;">💖</div>
    <div class="floating-heart" style="left: 80%; animation-delay: 10s;">💝</div>
    <div class="floating-star" style="left: 15%; animation-delay: 1s;">✨</div>
    <div class="floating-star" style="left: 35%; animation-delay: 3s;">⭐</div>
    <div class="floating-star" style="left: 55%; animation-delay: 5s;">🌟</div>
    <div class="floating-star" style="left: 75%; animation-delay: 7s;">✨</div>
    <div class="floating-star" style="left: 85%; animation-delay: 9s;">⭐</div>
  </div>

  <div class="birthday-animation" id="birthdayAnimation"></div>

  <div class="page-container">
    <div class="header-section">
      <h1 class="main-title">Buon Compleanno Bimba!</h1>
      <p class="subtitle">Con tutto il nostro amore</p>
      <p class="date-stamp">Un giorno magico per una persona speciale</p>
    </div>

    <div class="main-card">
      <div class="video-section">
        <button class="birthday-badge" id="playVideoBtn">Il nostro messaggio per te</button>
        <div class="video-container">
          <div class="video-wrapper">
            <video controls playsinline preload="metadata" id="birthdayVideo">
              <source src="/video/book.mp4" type="video/mp4">
              Il tuo browser non supporta la riproduzione video.
            </video>
          </div>
        </div>
      </div>

      <p class="date-stamp">
        E se ti va, qui sotto trovi anche il libro che abbiamo scritto per te.
      </p><br>

      <div class="actions-section">
        <a href="https://www.canva.com/design/DAGphrIEQZU/UzsvQvuyqJTigbo5W9F_nQ/view?utm_content=DAGphrIEQZU&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h0a2dfc3b4b"
           target="_blank" rel="noopener noreferrer" class="primary-btn" id="bookBtn">
          <span class="btn-icon">📚</span>
          <span>Apri il tuo libro digitale</span>
          <span class="btn-icon">✨</span>
        </a>
      </div>

      <div class="message-section">
        <div class="hearts-decoration">💖 💝 💖</div>
        <p class="message-text">
          "Ogni giorno con te è un regalo prezioso. Oggi festeggiamo non solo il tuo compleanno, ma la felicita' che porti nelle nostre vite."
        </p>
        <p class="signature">Con tantissimo amore,<br>Dominic, Mia e Liam</p>
        <p class="love-note">Sei il cuore della nostra famiglia ❤️</p>
      </div>
    </div>
  </div>

  <script>
    // Optimized performance with requestAnimationFrame batching
    class PerformanceManager {
      constructor() {
        this.animationCallbacks = [];
        this.isAnimating = false;
      }

      addCallback(callback) {
        this.animationCallbacks.push(callback);
        if (!this.isAnimating) {
          this.startAnimation();
        }
      }

      startAnimation() {
        this.isAnimating = true;
        const animate = () => {
          this.animationCallbacks.forEach(callback => callback());
          if (this.animationCallbacks.length > 0) {
            requestAnimationFrame(animate);
          } else {
            this.isAnimating = false;
          }
        };
        requestAnimationFrame(animate);
      }

      removeCallback(callback) {
        const index = this.animationCallbacks.indexOf(callback);
        if (index > -1) {
          this.animationCallbacks.splice(index, 1);
        }
      }
    }

    const performanceManager = new PerformanceManager();

    // Optimized particle system
    function createParticles() {
      const container = document.getElementById('particles');
      const particleCount = window.innerWidth > 768 ? 50 : 25; // Reduce on mobile
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.cssText = `
          left: ${Math.random() * 100}%;
          top: ${Math.random() * 100}%;
          animation-delay: ${Math.random() * 3}s;
          animation-duration: ${Math.random() * 2 + 2}s;
        `;
        container.appendChild(particle);
      }
    }

    // Optimized confetti system
    function createConfetti() {
      const container = document.getElementById('birthdayAnimation');
      const colors = ['#FF4EA6', '#00DFFC', '#FFD700', '#BC6FF1'];
      const confettiCount = window.innerWidth > 768 ? 100 : 50;
      
      // Clear existing confetti
      container.innerHTML = '';
      
      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.cssText = `
          left: ${Math.random() * 100}%;
          background-color: ${colors[Math.floor(Math.random() * colors.length)]};
          animation-delay: ${Math.random() * 2}s;
          animation-duration: ${Math.random() * 2 + 3}s;
        `;
        container.appendChild(confetti);
      }
      
      container.classList.add('active');
      
      setTimeout(() => {
        container.classList.remove('active');
        container.innerHTML = '';
      }, 5000);
    }

    // Optimized scroll handler with throttling
    let scrollTicking = false;
    function handleScroll() {
      if (!scrollTicking) {
        requestAnimationFrame(() => {
          const scrolled = window.pageYOffset;
          const rate = scrolled * -0.5;
          
          const floatingElements = document.querySelector('.floating-elements');
          if (floatingElements) {
            floatingElements.style.transform = `translate3d(0, ${rate}px, 0)`;
          }
          
          // Pause off-screen animations
          const elements = document.querySelectorAll('.floating-heart, .floating-star');
          elements.forEach(el => {
            const rect = el.getBoundingClientRect();
            const isVisible = rect.top <= window.innerHeight + 100 && rect.bottom >= -100;
            el.style.animationPlayState = isVisible ? 'running' : 'paused';
          });
          
          scrollTicking = false;
        });
        scrollTicking = true;
      }
    }

    // Enhanced mouse tracking with debouncing
    function setupCardInteraction() {
      const card = document.querySelector('.main-card');
      let mouseMoveTimeout;
      
      card.addEventListener('mousemove', function(e) {
        clearTimeout(mouseMoveTimeout);
        mouseMoveTimeout = setTimeout(() => {
          const rect = this.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          const rotateX = (y - centerY) / 20;
          const rotateY = (centerX - x) / 20;
          
          this.style.transform = `
            perspective(1000px) 
            rotateX(${rotateX}deg) 
            rotateY(${rotateY}deg) 
            translateZ(10px)
          `;
        }, 16); // ~60fps
      });
      
      card.addEventListener('mouseleave', function() {
        clearTimeout(mouseMoveTimeout);
        this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateZ(0)';
      });
    }

    // Enhanced button interaction
    function setupButtonInteraction() {
      const bookBtn = document.getElementById('bookBtn');
      
      bookBtn.addEventListener('click', function(e) {
        // Create optimized ripple effect
        const ripple = document.createElement('div');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.cssText = `
          position: absolute;
          width: ${size}px;
          height: ${size}px;
          left: ${x}px;
          top: ${y}px;
          background: rgba(255,255,255,0.4);
          border-radius: 50%;
          transform: scale(0);
          animation: ripple 0.8s ease-out;
          pointer-events: none;
          z-index: 1000;
        `;
        
        this.style.position = 'relative';
        this.appendChild(ripple);
        
        setTimeout(() => ripple.remove(), 800);
        setTimeout(createConfetti, 100);
      });
    }

    // Initialize everything when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      createParticles();
      setupCardInteraction();
      setupButtonInteraction();
      
      // Initial confetti after page load
      setTimeout(createConfetti, 1000);
      
      // Video interaction
      const video = document.getElementById('birthdayVideo');
      if (video) {
        video.addEventListener('play', createConfetti);
      }
      
      // Optimized scroll handling
      window.addEventListener('scroll', handleScroll, { passive: true });
      window.addEventListener('resize', handleScroll, { passive: true });
    });

    // Preload optimization
    if ('loading' in HTMLImageElement.prototype) {
      // Native lazy loading support
      document.querySelectorAll('img').forEach(img => {
        img.loading = 'lazy';
      });
    }

    // Avvia il video quando si clicca sul pulsante
    document.getElementById('playVideoBtn').addEventListener('click', function() {
      const video = document.getElementById('birthdayVideo');
      
      if (video.paused) {
        video.play(); // Se è fermo, fai play
        createConfetti(); // Eventuale effetto extra (se vuoi i confetti)
      } else {
        video.pause(); // Se è già in riproduzione, metti in pausa
      }
    });
  </script>
</body>
</html>