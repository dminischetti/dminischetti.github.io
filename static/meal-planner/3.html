<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#fef5e7">
<title>Meal Planner Pro</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

:root {
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
  --safe-left: env(safe-area-inset-left);
  --safe-right: env(safe-area-inset-right);
  
  /* Beautiful warm palette inspired by Notion & Linear */
  --cream: #fef5e7;
  --sand: #fae8d4;
  --peach: #ffb89a;
  --coral: #ff8c82;
  --sage: #95b99f;
  --sage-light: #c3d5c8;
  --ocean: #7ba7bc;
  --ocean-light: #a4c4d4;
  --lavender: #b8a7ce;
  --mauve: #d4b5c7;
  --terracotta: #d4826c;
  --warm-gray: #6b5d54;
  --charcoal: #3d3b38;
  --ink: #2c2925;
  
  /* Semantic colors */
  --bg-primary: #fef5e7;
  --bg-secondary: #ffffff;
  --bg-accent: #fae8d4;
  --bg-hover: rgba(149, 185, 159, 0.1);
  
  --text-primary: #2c2925;
  --text-secondary: #6b5d54;
  --text-tertiary: #9b8f84;
  
  --border: rgba(107, 93, 84, 0.15);
  --border-light: rgba(107, 93, 84, 0.08);
  
  --shadow-sm: 0 2px 8px rgba(61, 59, 56, 0.08);
  --shadow-md: 0 4px 16px rgba(61, 59, 56, 0.12);
  --shadow-lg: 0 8px 32px rgba(61, 59, 56, 0.16);
  
  --ease-out: cubic-bezier(0.22, 1, 0.36, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
  background: linear-gradient(180deg, var(--cream) 0%, var(--sand) 100%);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
  -webkit-font-smoothing: antialiased;
}

/* Subtle pattern overlay */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0.03;
  background-image: 
    repeating-linear-gradient(45deg, transparent, transparent 35px, var(--warm-gray) 35px, var(--warm-gray) 70px);
  pointer-events: none;
}

.header {
  position: sticky;
  top: 0;
  z-index: 100;
  padding-top: var(--safe-top);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid var(--border-light);
  box-shadow: var(--shadow-sm);
}

.header-content {
  padding: 20px;
  animation: slideDown 0.6s var(--ease-out);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.app-title {
  font-size: 32px;
  font-weight: 800;
  letter-spacing: -1px;
  background: linear-gradient(135deg, var(--sage), var(--ocean));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: inline-block;
}

.clear-all-btn {
  padding: 8px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  color: var(--coral);
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.clear-all-btn:hover {
  background: var(--coral);
  color: white;
  transform: scale(1.05);
}

.clear-all-btn:active {
  transform: scale(0.95);
}

.week-info {
  text-align: center;
  color: var(--text-secondary);
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.container {
  padding: 20px;
  padding-bottom: calc(100px + var(--safe-bottom));
}

.days-grid {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.day-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 20px;
  overflow: hidden;
  position: relative;
  transform-origin: center;
  animation: cardEntry 0.6s var(--ease-out) backwards;
  transition: all 0.4s var(--ease-out);
  box-shadow: var(--shadow-sm);
}

.day-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.day-card:nth-child(1) { animation-delay: 0.05s; }
.day-card:nth-child(2) { animation-delay: 0.1s; }
.day-card:nth-child(3) { animation-delay: 0.15s; }
.day-card:nth-child(4) { animation-delay: 0.2s; }
.day-card:nth-child(5) { animation-delay: 0.25s; }
.day-card:nth-child(6) { animation-delay: 0.3s; }
.day-card:nth-child(7) { animation-delay: 0.35s; }

@keyframes cardEntry {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.day-card.weekend {
  background: linear-gradient(135deg, var(--bg-secondary), var(--bg-accent));
}

.day-header {
  padding: 16px 20px;
  background: linear-gradient(135deg, var(--bg-accent), transparent);
  border-bottom: 1px solid var(--border-light);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.day-info {
  flex: 1;
}

.day-name {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.day-date {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.mode-selector-inline {
  display: flex;
  gap: 4px;
  background: var(--bg-secondary);
  padding: 2px;
  border-radius: 10px;
  border: 1px solid var(--border-light);
}

.mode-option {
  padding: 6px 10px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 12px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s var(--ease-out);
}

.mode-option:hover {
  background: var(--bg-hover);
}

.mode-option.active {
  background: var(--sage);
  color: white;
}

.mode-option.active.quick {
  background: var(--peach);
}

.mode-option.active.delivery {
  background: var(--ocean);
}

.day-content {
  padding: 20px;
  cursor: pointer;
  transition: background 0.2s;
}

.day-content:hover {
  background: var(--bg-hover);
}

.day-content:active {
  transform: scale(0.98);
}

.meal-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.meal-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--bg-accent);
  border-radius: 12px;
  transition: all 0.3s var(--ease-out);
}

.meal-item:hover {
  background: var(--sand);
  transform: translateX(4px);
}

.meal-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 14px;
  flex-shrink: 0;
}

.meal-icon.lunch {
  background: linear-gradient(135deg, var(--peach), var(--coral));
  color: white;
}

.meal-icon.dinner {
  background: linear-gradient(135deg, var(--ocean), var(--ocean-light));
  color: white;
}

.meal-details {
  flex: 1;
}

.meal-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.meal-description {
  font-size: 13px;
  color: var(--text-secondary);
}

.empty-state {
  text-align: center;
  padding: 20px;
  color: var(--text-tertiary);
  font-size: 14px;
}

.empty-state-icon {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.action-bar {
  position: fixed;
  bottom: var(--safe-bottom);
  left: 0;
  right: 0;
  padding: 20px;
  background: linear-gradient(to top, var(--bg-primary), transparent);
  z-index: 100;
}

.action-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border-light);
  border-radius: 20px;
  padding: 12px;
  box-shadow: var(--shadow-lg);
}

.action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 8px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  border-radius: 12px;
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.action-btn:hover {
  background: var(--bg-hover);
}

.action-btn:active {
  transform: scale(0.9);
}

.action-icon {
  font-size: 24px;
  transition: transform 0.3s var(--ease-spring);
}

.action-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
}

.action-btn.shuffle .action-icon { color: var(--sage); }
.action-btn.list .action-icon { color: var(--ocean); }
.action-btn.share .action-icon { color: var(--peach); }
.action-btn.settings .action-icon { color: var(--lavender); }

.floating-add {
  position: fixed;
  bottom: calc(120px + var(--safe-bottom));
  right: 20px;
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, var(--sage), var(--ocean));
  border-radius: 28px;
  border: none;
  color: white;
  font-size: 28px;
  font-weight: 300;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-lg);
  transition: all 0.3s var(--ease-spring);
  z-index: 99;
}

.floating-add:active {
  transform: scale(0.9);
}

.floating-add:hover {
  transform: scale(1.1) rotate(90deg);
}

/* Modal Styles */
.modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 20px;
  background: rgba(44, 41, 37, 0.6);
  backdrop-filter: blur(10px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s var(--ease-out);
}

.modal.active {
  opacity: 1;
  pointer-events: all;
}

.modal-content {
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  background: var(--bg-secondary);
  border-radius: 24px 24px 0 0;
  transform: translateY(100%);
  transition: transform 0.4s var(--ease-spring);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
}

.modal.active .modal-content {
  transform: translateY(0);
}

.modal-header {
  padding: 24px;
  border-bottom: 1px solid var(--border-light);
  background: linear-gradient(135deg, var(--bg-accent), var(--bg-secondary));
}

.modal-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
}

.modal-subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin-top: 4px;
}

.modal-body {
  padding: 24px;
  overflow-y: auto;
  max-height: 60vh;
}

.meal-selector {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.meal-type-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.meal-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.meal-option {
  padding: 10px 16px;
  background: var(--bg-accent);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.meal-option:hover {
  background: var(--sage-light);
  transform: translateY(-2px);
}

.meal-option.selected {
  background: var(--sage);
  color: white;
  border-color: var(--sage);
}

.modal-actions {
  padding: 20px;
  border-top: 1px solid var(--border-light);
  display: flex;
  gap: 12px;
}

.modal-btn {
  flex: 1;
  padding: 14px;
  border-radius: 12px;
  border: none;
  font-size: 16px;
  font-weight: 600;
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.modal-btn.cancel {
  background: var(--bg-accent);
  color: var(--text-primary);
  border: 1px solid var(--border-light);
}

.modal-btn.save, .modal-btn.primary {
  background: linear-gradient(135deg, var(--sage), var(--ocean));
  color: white;
  box-shadow: var(--shadow-md);
}

.modal-btn:active {
  transform: scale(0.95);
}

/* Quick Add Form */
.quick-add-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.form-input {
  padding: 12px 16px;
  background: var(--bg-accent);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  color: var(--text-primary);
  font-size: 15px;
  transition: all 0.3s var(--ease-out);
}

.form-input:focus {
  outline: none;
  border-color: var(--sage);
  background: white;
}

.form-select {
  padding: 12px 16px;
  background: var(--bg-accent);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  color: var(--text-primary);
  font-size: 15px;
  cursor: pointer;
}

/* Grocery List */
.grocery-list {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.store-section {
  margin-bottom: 16px;
}

.store-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 2px solid var(--sage-light);
}

.grocery-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.grocery-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--bg-accent);
  border: 1px solid var(--border-light);
  border-radius: 12px;
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.grocery-item:hover {
  background: var(--sand);
}

.grocery-checkbox {
  width: 20px;
  height: 20px;
  border: 2px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s var(--ease-out);
  display: flex;
  align-items: center;
  justify-content: center;
}

.grocery-checkbox.checked {
  background: var(--sage);
  border-color: var(--sage);
}

.grocery-checkbox.checked::after {
  content: '‚úì';
  color: white;
  font-size: 12px;
  font-weight: 700;
}

.grocery-item-name {
  flex: 1;
  font-size: 15px;
  color: var(--text-primary);
  transition: all 0.3s;
}

.grocery-item.checked .grocery-item-name {
  text-decoration: line-through;
  opacity: 0.5;
}

/* Settings */
.settings-section {
  padding: 24px 20px;
}

.setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: 16px;
  border: 1px solid var(--border-light);
  margin-bottom: 12px;
  box-shadow: var(--shadow-sm);
}

.setting-label {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-primary);
}

.switch {
  position: relative;
  width: 51px;
  height: 31px;
  background: var(--bg-accent);
  border-radius: 16px;
  border: 1px solid var(--border-light);
  transition: all 0.3s var(--ease-out);
  cursor: pointer;
}

.switch::after {
  content: '';
  position: absolute;
  width: 27px;
  height: 27px;
  background: white;
  border-radius: 14px;
  top: 2px;
  left: 2px;
  transition: all 0.3s var(--ease-spring);
  box-shadow: var(--shadow-sm);
}

.switch.active {
  background: var(--sage);
  border-color: var(--sage);
}

.switch.active::after {
  transform: translateX(20px);
}

.settings-button {
  width: 100%;
  padding: 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 16px;
  font-weight: 500;
  text-align: center;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.3s var(--ease-out);
  box-shadow: var(--shadow-sm);
}

.settings-button:hover {
  background: var(--bg-accent);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.settings-button.danger {
  color: var(--coral);
  border-color: var(--coral);
}

/* Toast */
.toast {
  position: fixed;
  bottom: calc(180px + var(--safe-bottom));
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  padding: 14px 20px;
  background: var(--charcoal);
  border-radius: 12px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  opacity: 0;
  transition: all 0.3s var(--ease-out);
  z-index: 10000;
  box-shadow: var(--shadow-lg);
}

.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* Responsive tweaks for iPhone 11/12 */
@media (max-width: 414px) {
  .app-title {
    font-size: 28px;
  }
  
  .day-card {
    border-radius: 16px;
  }
  
  .meal-item {
    padding: 10px;
  }
  
  .action-grid {
    padding: 10px;
    gap: 10px;
  }
}

/* Prevent overscroll */
html, body {
  overscroll-behavior: none;
}

/* Smooth scrolling */
.container {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}
</style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <div class="header-top">
        <h1 class="app-title">Meal Planner</h1>
        <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
      </div>
      <div class="week-info" id="weekInfo">Next Week ‚Ä¢ Loading...</div>
    </div>
  </div>

  <div class="container">
    <div class="days-grid" id="daysGrid">
      <!-- Days will be rendered here -->
    </div>

    <div class="settings-section">
      <div class="setting-item">
        <span class="setting-label">Weekend Planning</span>
        <div class="switch" id="weekendToggle"></div>
      </div>
    </div>
  </div>

  <button class="floating-add" id="quickAdd">+</button>

  <div class="action-bar">
    <div class="action-grid">
      <button class="action-btn shuffle" id="shuffleBtn">
        <span class="action-icon">üé≤</span>
        <span class="action-label">Shuffle</span>
      </button>
      <button class="action-btn list" id="listBtn">
        <span class="action-icon">üõí</span>
        <span class="action-label">Grocery</span>
      </button>
      <button class="action-btn share" id="shareBtn">
        <span class="action-icon">üì§</span>
        <span class="action-label">Share</span>
      </button>
      <button class="action-btn settings" id="settingsBtn">
        <span class="action-icon">‚öôÔ∏è</span>
        <span class="action-label">Settings</span>
      </button>
    </div>
  </div>

  <!-- Day Editor Modal -->
  <div class="modal" id="dayModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Plan Your Day</h2>
        <p class="modal-subtitle" id="modalSubtitle"></p>
      </div>
      <div class="modal-body">
        <div class="meal-selector">
          <div>
            <div class="meal-type-label">Lunch Options</div>
            <div class="meal-options" id="lunchOptions"></div>
          </div>
          <div>
            <div class="meal-type-label">Dinner Options</div>
            <div class="meal-options" id="dinnerOptions"></div>
          </div>
          <div id="sideSection">
            <div class="meal-type-label">Side Dishes</div>
            <div class="meal-options" id="sideOptions"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Add Modal -->
  <div class="modal" id="quickAddModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Quick Add Meal</h2>
        <p class="modal-subtitle">Add a custom meal to your plan</p>
      </div>
      <div class="modal-body">
        <div class="quick-add-form">
          <div class="form-group">
            <label class="form-label">Day</label>
            <select class="form-select" id="quickAddDay">
              <option value="0">Monday</option>
              <option value="1">Tuesday</option>
              <option value="2">Wednesday</option>
              <option value="3">Thursday</option>
              <option value="4">Friday</option>
              <option value="5">Saturday</option>
              <option value="6">Sunday</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Meal Type</label>
            <select class="form-select" id="quickAddType">
              <option value="lunch">Lunch</option>
              <option value="dinner">Dinner</option>
              <option value="both">Both</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Meal Name</label>
            <input type="text" class="form-input" id="quickAddName" placeholder="Enter meal name">
          </div>
          <div class="form-group" id="quickAddSideGroup">
            <label class="form-label">Side Dish (Optional)</label>
            <input type="text" class="form-input" id="quickAddSide" placeholder="Enter side dish">
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn cancel" id="quickAddCancel">Cancel</button>
        <button class="modal-btn primary" id="quickAddSave">Add Meal</button>
      </div>
    </div>
  </div>

  <!-- Grocery List Modal -->
  <div class="modal" id="groceryModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Shopping List</h2>
        <p class="modal-subtitle">Organized by store</p>
      </div>
      <div class="modal-body">
        <div class="grocery-list" id="groceryList">
          <!-- Grocery items will be rendered here -->
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn cancel" id="groceryClose">Close</button>
        <button class="modal-btn primary" id="groceryCopy">Copy List</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Settings</h2>
      </div>
      <div class="modal-body">
        <button class="settings-button" id="exportBtn">üì• Export Meal Plan</button>
        <button class="settings-button" id="importBtn">üì§ Import Meal Plan</button>
        <button class="settings-button danger" id="resetBtn">üóëÔ∏è Reset All Data</button>
      </div>
      <div class="modal-actions">
        <button class="modal-btn cancel" id="settingsClose">Close</button>
      </div>
    </div>
  </div>

<script>
class MealPlannerPro {
  constructor() {
    this.data = this.loadData() || {};
    this.settings = this.loadSettings() || {
      weekendEnabled: false
    };
    
    this.currentEditingDay = null;
    
    this.meals = {
      lunch: [
        "Caesar Salad", "Grilled Chicken Wrap", "Vegetable Soup", "Quinoa Bowl",
        "Pasta Primavera", "Turkey Sandwich", "Greek Salad", "Sushi Roll",
        "Buddha Bowl", "Chicken Salad", "Tomato Soup", "Mediterranean Wrap",
        "Avocado Toast", "Ramen Bowl", "Tuna Salad"
      ],
      dinner: {
        regular: [
          "Grilled Salmon", "Chicken Parmesan", "Beef Stir Fry", "Veggie Lasagna",
          "Tacos", "Pad Thai", "Steak & Potatoes", "Curry Chicken",
          "Spaghetti Bolognese", "Roast Chicken", "Fish Tacos", "Veggie Burger",
          "Chicken Fajitas", "Beef Teriyaki", "Mushroom Risotto"
        ],
        quick: [
          "Frozen Pizza", "Instant Ramen", "Quesadillas", "Grilled Cheese",
          "Hot Dogs", "Mac & Cheese", "BLT Sandwich", "Chicken Nuggets"
        ],
        delivery: [
          "Pizza Delivery", "Chinese Takeout", "Sushi Delivery", "Thai Delivery",
          "Indian Delivery", "Mexican Delivery", "Burger Delivery", "Mediterranean Delivery"
        ]
      },
      sides: [
        "Roasted Vegetables", "Mashed Potatoes", "Rice Pilaf", "Garden Salad",
        "Garlic Bread", "Coleslaw", "Sweet Potato Fries", "Steamed Broccoli",
        "Corn on the Cob", "Quinoa", "Green Beans", "Caesar Salad",
        "French Fries", "Onion Rings", "Asparagus"
      ]
    };
    
    // Store-based grocery organization
    this.storeMapping = {
      "Whole Foods": [
        "Organic Chicken", "Wild Salmon", "Grass-fed Beef", "Turkey", "Fresh Tuna",
        "Organic Lettuce", "Heirloom Tomatoes", "Organic Broccoli", "Baby Carrots",
        "Quinoa", "Artisan Bread", "Avocados", "Fresh Herbs"
      ],
      "Trader Joe's": [
        "Frozen Pizza", "Mac & Cheese", "Pasta", "Rice", "Tortillas",
        "Cheese Selection", "Greek Yogurt", "Hummus", "Pre-made Salads",
        "Stir Fry Vegetables", "Frozen Dumplings"
      ],
      "Local Grocery": [
        "Ground Beef", "Chicken Breasts", "Potatoes", "Onions", "Garlic",
        "Bell Peppers", "Mushrooms", "Milk", "Butter", "Eggs",
        "Sandwich Bread", "Deli Meats", "Basic Vegetables"
      ],
      "Asian Market": [
        "Sushi Rice", "Nori", "Soy Sauce", "Ramen Noodles", "Tofu",
        "Bok Choy", "Ginger", "Rice Noodles", "Curry Paste", "Coconut Milk"
      ]
    };
    
    this.init();
  }

  init() {
    this.setupEventListeners();
    this.updateWeekInfo();
    this.renderDays();
    this.updateSettingsUI();
  }

  setupEventListeners() {
    // Header actions
    document.getElementById('clearAllBtn').addEventListener('click', () => this.confirmClearAll());
    
    // Action buttons
    document.getElementById('shuffleBtn').addEventListener('click', () => this.shuffleAll());
    document.getElementById('listBtn').addEventListener('click', () => this.showGroceryList());
    document.getElementById('shareBtn').addEventListener('click', () => this.sharePlan());
    document.getElementById('settingsBtn').addEventListener('click', () => this.showSettings());
    document.getElementById('quickAdd').addEventListener('click', () => this.showQuickAdd());
    
    // Settings toggle
    document.getElementById('weekendToggle').addEventListener('click', () => this.toggleWeekend());
    
    // Quick add modal
    document.getElementById('quickAddCancel').addEventListener('click', () => this.closeModal('quickAddModal'));
    document.getElementById('quickAddSave').addEventListener('click', () => this.saveQuickAdd());
    document.getElementById('quickAddType').addEventListener('change', (e) => {
      document.getElementById('quickAddSideGroup').style.display = 
        e.target.value === 'lunch' ? 'none' : 'flex';
    });
    
    // Grocery modal
    document.getElementById('groceryClose').addEventListener('click', () => this.closeModal('groceryModal'));
    document.getElementById('groceryCopy').addEventListener('click', () => this.copyGroceryList());
    
    // Settings modal
    document.getElementById('settingsClose').addEventListener('click', () => this.closeModal('settingsModal'));
    document.getElementById('exportBtn').addEventListener('click', () => this.exportData());
    document.getElementById('importBtn').addEventListener('click', () => this.importData());
    document.getElementById('resetBtn').addEventListener('click', () => this.resetAllData());
    
    // Close modals on background click
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) this.closeModal(modal.id);
      });
    });
  }

  updateWeekInfo() {
    const today = new Date();
    const nextMonday = new Date(today);
    const dayOfWeek = today.getDay();
    const daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
    nextMonday.setDate(today.getDate() + daysUntilMonday);
    
    const nextSunday = new Date(nextMonday);
    nextSunday.setDate(nextMonday.getDate() + 6);
    
    const options = { month: 'short', day: 'numeric' };
    const startStr = nextMonday.toLocaleDateString('en-US', options);
    const endStr = nextSunday.toLocaleDateString('en-US', options);
    
    document.getElementById('weekInfo').textContent = `Next Week ‚Ä¢ ${startStr} - ${endStr}`;
  }

  renderDays() {
    const daysGrid = document.getElementById('daysGrid');
    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
    const today = new Date();
    const nextMonday = new Date(today);
    const dayOfWeek = today.getDay();
    const daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
    nextMonday.setDate(today.getDate() + daysUntilMonday);
    
    const daysToShow = this.settings.weekendEnabled ? 7 : 5;
    
    daysGrid.innerHTML = '';
    
    for (let i = 0; i < daysToShow; i++) {
      const currentDate = new Date(nextMonday);
      currentDate.setDate(nextMonday.getDate() + i);
      const dayKey = this.getDayKey(currentDate);
      const dayData = this.data[dayKey] || { lunch: '', dinner: '', side: '', mode: 'regular' };
      const isWeekend = i >= 5;
      const hasMeals = dayData.lunch || dayData.dinner;
      
      const card = document.createElement('div');
      card.className = `day-card ${isWeekend ? 'weekend' : ''} ${hasMeals ? 'has-meals' : ''}`;
      card.innerHTML = `
        <div class="day-header">
          <div class="day-info">
            <div class="day-name">${days[i]}</div>
            <div class="day-date">${currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
          </div>
          <div class="mode-selector-inline" data-day="${dayKey}">
            <button class="mode-option ${dayData.mode === 'regular' ? 'active' : ''}" data-mode="regular">Regular</button>
            <button class="mode-option ${dayData.mode === 'quick' ? 'active quick' : ''}" data-mode="quick">Quick</button>
            <button class="mode-option ${dayData.mode === 'delivery' ? 'active delivery' : ''}" data-mode="delivery">Delivery</button>
          </div>
        </div>
        <div class="day-content" data-day="${dayKey}" data-dayname="${days[i]}" data-date="${currentDate.toISOString()}">
          <div class="meal-content">
            ${this.renderMealContent(dayData)}
          </div>
        </div>
      `;
      
      // Mode selector event listeners
      card.querySelectorAll('.mode-option').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const mode = btn.dataset.mode;
          this.changeDayMode(dayKey, mode);
        });
      });
      
      // Day content click
      card.querySelector('.day-content').addEventListener('click', function() {
        this.openDayEditor(dayKey, days[i], currentDate);
      }.bind(this));
      
      daysGrid.appendChild(card);
    }
  }

  changeDayMode(dayKey, mode) {
    if (!this.data[dayKey]) {
      this.data[dayKey] = { lunch: '', dinner: '', side: '', mode: 'regular' };
    }
    
    this.data[dayKey].mode = mode;
    
    // If changing to delivery, remove side dish
    if (mode === 'delivery') {
      this.data[dayKey].side = '';
    }
    
    this.saveData();
    this.renderDays();
    this.triggerHaptic();
  }

  renderMealContent(dayData) {
    if (!dayData.lunch && !dayData.dinner) {
      return `
        <div class="empty-state">
          <div class="empty-state-icon">üçΩÔ∏è</div>
          <div>Tap to plan meals</div>
        </div>
      `;
    }
    
    let content = '';
    
    if (dayData.lunch) {
      content += `
        <div class="meal-item">
          <div class="meal-icon lunch">L</div>
          <div class="meal-details">
            <div class="meal-name">${dayData.lunch}</div>
            <div class="meal-description">Lunch</div>
          </div>
        </div>
      `;
    }
    
    if (dayData.dinner) {
      content += `
        <div class="meal-item">
          <div class="meal-icon dinner">D</div>
          <div class="meal-details">
            <div class="meal-name">${dayData.dinner}</div>
            <div class="meal-description">Dinner${dayData.side && dayData.mode !== 'delivery' ? ` with ${dayData.side}` : ''}</div>
          </div>
        </div>
      `;
    }
    
    return content;
  }

  openDayEditor(dayKey, dayName, date) {
    this.currentEditingDay = dayKey;
    const modal = document.getElementById('dayModal');
    const dayData = this.data[dayKey] || { lunch: '', dinner: '', side: '', mode: 'regular' };
    
    document.getElementById('modalTitle').textContent = `Plan ${dayName}`;
    document.getElementById('modalSubtitle').textContent = date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
    
    this.updateMealOptions(dayData);
    modal.classList.add('active');
    this.triggerHaptic();
  }

  updateMealOptions(dayData) {
    const mode = dayData.mode || 'regular';
    
    // Render lunch options
    this.renderMealOptions('lunchOptions', this.meals.lunch, dayData.lunch);
    
    // Render dinner options based on mode
    const dinnerOptions = mode === 'delivery' ? this.meals.dinner.delivery :
                         mode === 'quick' ? this.meals.dinner.quick :
                         this.meals.dinner.regular;
    this.renderMealOptions('dinnerOptions', dinnerOptions, dayData.dinner);
    
    // Show/hide sides based on mode
    const sideSection = document.getElementById('sideSection');
    if (mode === 'delivery') {
      sideSection.style.display = 'none';
    } else {
      sideSection.style.display = 'block';
      this.renderMealOptions('sideOptions', this.meals.sides, dayData.side);
    }
  }

  renderMealOptions(elementId, options, selected) {
    const container = document.getElementById(elementId);
    container.innerHTML = options.map(option => `
      <button class="meal-option ${option === selected ? 'selected' : ''}" data-meal="${option}">
        ${option}
      </button>
    `).join('');
    
    container.querySelectorAll('.meal-option').forEach(btn => {
      btn.addEventListener('click', (e) => {
        container.querySelectorAll('.meal-option').forEach(b => b.classList.remove('selected'));
        e.target.classList.add('selected');
        
        // Auto-save when selection changes
        this.autoSaveMeal();
        this.triggerHaptic();
      });
    });
  }

  autoSaveMeal() {
    if (!this.currentEditingDay) return;
    
    const lunch = document.querySelector('#lunchOptions .meal-option.selected')?.dataset.meal || '';
    const dinner = document.querySelector('#dinnerOptions .meal-option.selected')?.dataset.meal || '';
    const mode = this.data[this.currentEditingDay]?.mode || 'regular';
    const side = mode !== 'delivery' ? 
      (document.querySelector('#sideOptions .meal-option.selected')?.dataset.meal || '') : '';
    
    if (!this.data[this.currentEditingDay]) {
      this.data[this.currentEditingDay] = {};
    }
    
    this.data[this.currentEditingDay] = { 
      ...this.data[this.currentEditingDay],
      lunch, 
      dinner, 
      side
    };
    
    this.saveData();
    this.renderDays();
  }

  showQuickAdd() {
    const modal = document.getElementById('quickAddModal');
    const weekendEnabled = this.settings.weekendEnabled;
    const daySelect = document.getElementById('quickAddDay');
    
    // Update day options based on weekend setting
    if (!weekendEnabled) {
      daySelect.options[5].style.display = 'none';
      daySelect.options[6].style.display = 'none';
    } else {
      daySelect.options[5].style.display = 'block';
      daySelect.options[6].style.display = 'block';
    }
    
    modal.classList.add('active');
    this.triggerHaptic();
  }

  saveQuickAdd() {
    const dayIndex = document.getElementById('quickAddDay').value;
    const mealType = document.getElementById('quickAddType').value;
    const mealName = document.getElementById('quickAddName').value.trim();
    const sideName = document.getElementById('quickAddSide').value.trim();
    
    if (!mealName) {
      this.showToast('Please enter a meal name');
      return;
    }
    
    const today = new Date();
    const nextMonday = new Date(today);
    const dayOfWeek = today.getDay();
    const daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
    nextMonday.setDate(today.getDate() + daysUntilMonday);
    
    const targetDate = new Date(nextMonday);
    targetDate.setDate(nextMonday.getDate() + parseInt(dayIndex));
    const dayKey = this.getDayKey(targetDate);
    
    if (!this.data[dayKey]) {
      this.data[dayKey] = { lunch: '', dinner: '', side: '', mode: 'regular' };
    }
    
    if (mealType === 'lunch' || mealType === 'both') {
      this.data[dayKey].lunch = mealName;
    }
    if (mealType === 'dinner' || mealType === 'both') {
      this.data[dayKey].dinner = mealName;
      if (sideName && this.data[dayKey].mode !== 'delivery') {
        this.data[dayKey].side = sideName;
      }
    }
    
    this.saveData();
    this.renderDays();
    this.closeModal('quickAddModal');
    
    // Clear form
    document.getElementById('quickAddName').value = '';
    document.getElementById('quickAddSide').value = '';
    
    this.showToast('Meal added successfully! ‚ú®');
  }

  showGroceryList() {
    const modal = document.getElementById('groceryModal');
    const groceryList = document.getElementById('groceryList');
    
    // Generate grocery list organized by store
    const storeItems = this.organizeByStore();
    
    groceryList.innerHTML = Object.entries(storeItems).map(([store, items]) => `
      <div class="store-section">
        <div class="store-title">${store}</div>
        <div class="grocery-items">
          ${items.map(item => `
            <div class="grocery-item" data-item="${item}">
              <div class="grocery-checkbox"></div>
              <div class="grocery-item-name">${item}</div>
            </div>
          `).join('')}
        </div>
      </div>
    `).join('');
    
    // Add checkbox functionality
    groceryList.querySelectorAll('.grocery-item').forEach(item => {
      item.addEventListener('click', () => {
        item.classList.toggle('checked');
        item.querySelector('.grocery-checkbox').classList.toggle('checked');
        this.triggerHaptic();
      });
    });
    
    modal.classList.add('active');
  }

  organizeByStore() {
    const stores = {
      "Whole Foods": [],
      "Trader Joe's": [],
      "Local Grocery": [],
      "Asian Market": []
    };
    
    // Analyze meals and organize by store
    Object.values(this.data).forEach(dayData => {
      if (dayData.lunch) {
        this.categorizeByStore(dayData.lunch, stores);
      }
      if (dayData.dinner) {
        this.categorizeByStore(dayData.dinner, stores);
      }
      if (dayData.side && dayData.mode !== 'delivery') {
        this.categorizeByStore(dayData.side, stores);
      }
    });
    
    // Remove duplicates and empty stores
    Object.keys(stores).forEach(store => {
      stores[store] = [...new Set(stores[store])];
      if (stores[store].length === 0) {
        delete stores[store];
      }
    });
    
    return stores;
  }

  categorizeByStore(meal, stores) {
    const mealLower = meal.toLowerCase();
    
    // Whole Foods items
    if (mealLower.includes('salmon') || mealLower.includes('organic') || mealLower.includes('quinoa')) {
      stores["Whole Foods"].push('Wild Salmon');
      if (mealLower.includes('quinoa')) stores["Whole Foods"].push('Quinoa');
    }
    
    // Trader Joe's items
    if (mealLower.includes('pizza') || mealLower.includes('mac') || mealLower.includes('frozen')) {
      stores["Trader Joe's"].push('Frozen Pizza');
      if (mealLower.includes('mac')) stores["Trader Joe's"].push('Mac & Cheese');
    }
    
    // Asian Market items
    if (mealLower.includes('sushi') || mealLower.includes('ramen') || mealLower.includes('pad thai')) {
      if (mealLower.includes('sushi')) {
        stores["Asian Market"].push('Sushi Rice');
        stores["Asian Market"].push('Nori');
      }
      if (mealLower.includes('ramen')) stores["Asian Market"].push('Ramen Noodles');
      if (mealLower.includes('pad thai')) stores["Asian Market"].push('Rice Noodles');
    }
    
    // Local Grocery (default for common items)
    if (mealLower.includes('chicken')) stores["Local Grocery"].push('Chicken Breasts');
    if (mealLower.includes('beef') || mealLower.includes('steak')) stores["Local Grocery"].push('Ground Beef');
    if (mealLower.includes('potato')) stores["Local Grocery"].push('Potatoes');
    if (mealLower.includes('salad')) stores["Local Grocery"].push('Mixed Greens');
    if (mealLower.includes('bread')) stores["Local Grocery"].push('Sandwich Bread');
  }

  copyGroceryList() {
    let text = 'üõí Shopping List by Store\n\n';
    
    const stores = document.querySelectorAll('.store-section');
    stores.forEach(store => {
      const title = store.querySelector('.store-title').textContent;
      text += `üìç ${title}:\n`;
      
      store.querySelectorAll('.grocery-item').forEach(item => {
        const name = item.querySelector('.grocery-item-name').textContent;
        const checked = item.classList.contains('checked');
        text += `${checked ? '‚úì' : '‚óã'} ${name}\n`;
      });
      text += '\n';
    });
    
    this.copyToClipboard(text);
  }

  shuffleAll() {
    const days = this.settings.weekendEnabled ? 7 : 5;
    const today = new Date();
    const nextMonday = new Date(today);
    const dayOfWeek = today.getDay();
    const daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
    nextMonday.setDate(today.getDate() + daysUntilMonday);
    
    for (let i = 0; i < days; i++) {
      const currentDate = new Date(nextMonday);
      currentDate.setDate(nextMonday.getDate() + i);
      const dayKey = this.getDayKey(currentDate);
      
      // Keep existing mode or randomly assign one
      let mode = this.data[dayKey]?.mode || 'regular';
      if (!this.data[dayKey]) {
        // For new days, randomly assign mode
        const rand = Math.random();
        mode = rand > 0.85 ? 'delivery' : rand > 0.7 ? 'quick' : 'regular';
      }
      
      const dinnerOptions = mode === 'delivery' ? this.meals.dinner.delivery :
                           mode === 'quick' ? this.meals.dinner.quick :
                           this.meals.dinner.regular;
      
      this.data[dayKey] = {
        lunch: this.getRandomMeal(this.meals.lunch),
        dinner: this.getRandomMeal(dinnerOptions),
        side: mode !== 'delivery' ? this.getRandomMeal(this.meals.sides) : '',
        mode: mode
      };
    }
    
    this.saveData();
    this.renderDays();
    this.triggerHaptic('impact');
    this.showToast('Meals shuffled with sides! üé≤');
  }

  getRandomMeal(meals) {
    return meals[Math.floor(Math.random() * meals.length)];
  }

  sharePlan() {
    const shareText = this.generateShareText();
    
    if (navigator.share) {
      navigator.share({
        title: 'Weekly Meal Plan',
        text: shareText
      }).catch(() => {
        this.copyToClipboard(shareText);
      });
    } else {
      this.copyToClipboard(shareText);
    }
  }

  generateShareText() {
    let text = 'üçΩÔ∏è Weekly Meal Plan\n';
    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
    const daysToShow = this.settings.weekendEnabled ? 7 : 5;
    
    const today = new Date();
    const nextMonday = new Date(today);
    const dayOfWeek = today.getDay();
    const daysUntilMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
    nextMonday.setDate(today.getDate() + daysUntilMonday);
    
    const nextSunday = new Date(nextMonday);
    nextSunday.setDate(nextMonday.getDate() + 6);
    
    text += `${nextMonday.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - `;
    text += `${nextSunday.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n\n`;
    
    for (let i = 0; i < daysToShow; i++) {
      const currentDate = new Date(nextMonday);
      currentDate.setDate(nextMonday.getDate() + i);
      const dayKey = this.getDayKey(currentDate);
      const dayData = this.data[dayKey] || {};
      
      text += `${days[i]}:\n`;
      if (dayData.lunch) text += `  ü•ó Lunch: ${dayData.lunch}\n`;
      if (dayData.dinner) {
        text += `  üçΩÔ∏è Dinner: ${dayData.dinner}`;
        if (dayData.side && dayData.mode !== 'delivery') text += ` with ${dayData.side}`;
        text += '\n';
      }
      if (!dayData.lunch && !dayData.dinner) text += '  No meals planned\n';
      text += '\n';
    }
    
    return text;
  }

  copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
      this.showToast('Copied to clipboard! üìã');
    });
  }

  showSettings() {
    document.getElementById('settingsModal').classList.add('active');
  }

  exportData() {
    const exportObj = {
      data: this.data,
      settings: this.settings,
      version: '2.0'
    };
    
    const dataStr = JSON.stringify(exportObj, null, 2);
    const dataBlob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(dataBlob);
    
    const link = document.createElement('a');
    link.href = url;
    link.download = 'meal-plan-export.json';
    link.click();
    
    URL.revokeObjectURL(url);
    this.showToast('Data exported! üì•');
  }

  importData() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.json';
    
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      
      reader.onload = (event) => {
        try {
          const importObj = JSON.parse(event.target.result);
          
          if (importObj.data && importObj.settings) {
            this.data = importObj.data;
            this.settings = importObj.settings;
            
            this.saveData();
            this.saveSettings();
            this.renderDays();
            this.updateSettingsUI();
            
            this.showToast('Data imported! üì§');
          } else {
            this.showToast('Invalid import file');
          }
        } catch (error) {
          this.showToast('Error importing data');
        }
      };
      
      reader.readAsText(file);
    };
    
    input.click();
  }

  resetAllData() {
    if (confirm('Reset all data? This cannot be undone.')) {
      this.data = {};
      this.settings = {
        weekendEnabled: false
      };
      
      this.saveData();
      this.saveSettings();
      this.renderDays();
      this.updateSettingsUI();
      this.closeModal('settingsModal');
      
      this.showToast('All data reset! üîÑ');
    }
  }

  confirmClearAll() {
    if (confirm('Clear all meal plans for next week?')) {
      this.data = {};
      this.saveData();
      this.renderDays();
      this.showToast('All meals cleared! üßπ');
    }
  }

  toggleWeekend() {
    this.settings.weekendEnabled = !this.settings.weekendEnabled;
    document.getElementById('weekendToggle').classList.toggle('active');
    this.saveSettings();
    this.renderDays();
    this.triggerHaptic();
  }

  updateSettingsUI() {
    document.getElementById('weekendToggle').classList.toggle('active', this.settings.weekendEnabled);
  }

  closeModal(modalId) {
    document.getElementById(modalId).classList.remove('active');
    this.currentEditingDay = null;
  }

  showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;
    document.body.appendChild(toast);
    
    setTimeout(() => toast.classList.add('show'), 100);
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => toast.remove(), 300);
    }, 3000);
  }

  triggerHaptic(type = 'light') {
    if (navigator.vibrate) {
      const patterns = {
        light: 10,
        impact: 20,
        heavy: 30
      };
      navigator.vibrate(patterns[type] || 10);
    }
  }

  getDayKey(date) {
    return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;
  }

  saveData() {
    localStorage.setItem('mealPlannerData', JSON.stringify(this.data));
  }

  loadData() {
    const saved = localStorage.getItem('mealPlannerData');
    return saved ? JSON.parse(saved) : {};
  }

  saveSettings() {
    localStorage.setItem('mealPlannerSettings', JSON.stringify(this.settings));
  }

  loadSettings() {
    const saved = localStorage.getItem('mealPlannerSettings');
    return saved ? JSON.parse(saved) : null;
  }
}

// Initialize app when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  new MealPlannerPro();
});

// Add PWA support
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').catch(() => {});
}
</script>
</body>
</html>
